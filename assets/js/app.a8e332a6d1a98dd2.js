/**
 * @module APP
 * @module md5
 * @module Router
 * @module AppAlert
 * @module TEMPLATE
 * @module ApiHandler
 * @module StorageHandeler
 * @function fillPostPlaceHolder
 * @function fillCardPlaceHolders
 * @license Apache-2.0
 * @copyright Tanay Shandilya <tanay.shandilya99@gmail.com> 2019
 */
const fillCardPlaceHolders=b=>{for(var c=window.APP,a=0;3>a;a++)b.append(c.newComponent(c.TEMPLATE.card.html,c.TEMPLATE.css,"dynamic",a=>{a.$("app-card-img").css({"background-image":`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='350' height='250'%3E%3Crect width='350' height='250' style='fill:rgb(37, 39, 41)' /%3E Sorry, your browser does not support inline SVG. %3C/svg%3E")`}),a.$(".category").html("&nbsp;"),a.$(".date").html("&nbsp;"),a.$(".card-title").html("&nbsp;"),a.$(".card-content").html("&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;"),a.$(".card-title").css({"background-color":"#2e3031","border-radius":"3px","margin-top":"0.25em"}),a.$(".card-content").css({"background-color":"#2e3031","border-radius":"3px","margin-top":"0.25em"}),a.$(".card-btn").setAttribute("disabled",""),a.$(".card-btn").html("Loading Posts"),a.$(".card-btn").css({cursor:"wait",color:"#888"}),a.css({cursor:"wait !important",animation:"2s loading infinite"})}))};const fillPostPlaceHolder=b=>{var c=window.APP;b.append(c.newComponent(c.TEMPLATE.post.html,c.TEMPLATE.post.css,"dynamic",a=>{a.$("app-post-img").css({"background-image":`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='350' height='250'%3E%3Crect width='350' height='250' style='fill:rgb(37, 39, 41)' /%3E Sorry, your browser does not support inline SVG. %3C/svg%3E)`}),a.$("app-post-pills div").forEach(a=>{a.html("&nbsp;")}),a.$("app-post-title").html("&nbsp;"),a.$("app-post-title").css({"background-color":"#333","border-radius":"4px"}),a.$("app-post-content").css({"background-color":"#444","border-radius":"4px"}),a.$("app-post-content").html("&nbsp;&nbsp;<br><br>&nbsp;&nbsp;<br><br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;"),a.$("app-post-meta").css({display:"none"}),a.css({cursor:"wait",animation:"2s loading infinite"})}))};APP.newStyle(APP.TEMPLATE.static.css).render(),APP.newComponent(APP.TEMPLATE.navbar.html,APP.TEMPLATE.navbar.css,"static",a=>{a.css({position:"sticky",top:0,"z-index":1}),a.$("[_menu_trigger]").addEventListener("click",()=>{a.$("app-menu > ul").classList.add("open")}),a.$("app-menu > ul","after").addEventListener("click",()=>{a.$("app-menu > ul").classList.remove("open")})}).render(),ROUTER.on("/",()=>{APP.clearScreen(),APP.title(),APP.meta("og:title",document.title),APP.meta("og:url",window.location.href),APP.meta("og:image","https://tanayshandilya.github.io/assets/img/bg-home.jpg"),APP.meta("og:description","Tanay is a cloud architect, developer, data science enthusiast, and also a cyber security student..."),APP.newComponent(APP.TEMPLATE.cover.html,APP.TEMPLATE.cover.css,"dynamic",a=>{a.$("app-cover").css({"background-image":"url('/assets/images/home-bg.jpg')"})}).render(),APP.newComponent(APP.TEMPLATE.home.html,APP.TEMPLATE.home.css,"dynamic",a=>{fillCardPlaceHolders(a.$('.i-container'));window.API.static("blog",b=>{a.$('.i-container').html('');b.forEach(b=>{a.$(".i-container").append(APP.newComponent(APP.TEMPLATE.card.html,APP.TEMPLATE.card.css,"dynamic",a=>{a.$(".card-title").html(b.title),a.$("app-card-img").css({"background-image":"url("+b.image+")"}),a.$(".card-content").html(b.excerpt),a.$(".card-btn").href=b.url,a.$(".category").html(b.categoryName),a.$(".date").html(window.formatDate(b.date)),a.$(".card-btn").html("Read More")}))})},()=>{a.append(APP.newComponent(APP.TEMPLATE.error.html,APP.TEMPLATE.error.css,"dynamic",a=>{a.$("app-error-message").text(`There seems to be an error while trying to connect to the api server.`)}))})}).render(),window.ripple(),new IpTrack}),ROUTER.on("/about",()=>{new IpTrack,APP.clearScreen(),APP.title("About Me"),window.API.static("about",a=>{var b=a;APP.newComponent(APP.TEMPLATE.about.html,APP.TEMPLATE.about.css,"dynamic",a=>{a.$("#who").html("Who is Tanay Shandilya?"),a.$("#fun").html("Let's hangout sometime"),a.$("#skills").html("His knowledge base"),a.$("#social").html("Connect with him"),a.$(".i-excerpt").html(b.excerpt),a.$(".i-desc").html(b.content),b.connect.forEach(b=>{var c=document.createElement("a");c.classList.add("social-link"),c.target="_blank",c.href=b.url,c.setAttribute("_ripple",""),c.html(b.name),c.css({"background-color":b.color}),a.$(".i-connect").append(c)}),a.$(".i-connect").css({"grid-template-columns":`repeat(${b.connect.length}, auto)`}),b.skills.forEach(b=>{var c=document.createElement("app-skill");c.html(b.value),c.setAttribute("_ripple",""),c.css({"background-color":b.color}),a.$(".i-skills").append(c)})}).render(),window.ripple()},()=>{APP.screen.append(APP.newComponent(APP.TEMPLATE.error.html,APP.TEMPLATE.error.css,"dynamic",a=>{a.$("app-error-message").text(`There seems to be an error while trying to connect to the api server.`)}))})}),ROUTER.on("/blog",()=>{new IpTrack,APP.clearScreen(),APP.title("Blog"),APP.newComponent(APP.TEMPLATE.blog.html,APP.TEMPLATE.blog.css,"dynamic",a=>{fillCardPlaceHolders(a.$('app-blog'));window.API.static("blog",b=>{a.$("app-blog").html(''),b.forEach(b=>{a.$("app-blog").append(APP.newComponent(APP.TEMPLATE.card.html,APP.TEMPLATE.card.css,"dynamic",a=>{a.$(".card-title").html(b.title),a.$("app-card-img").css({"background-image":"url("+b.image+")"}),a.$(".card-content").html(b.excerpt),a.$(".card-btn").href=b.url,a.$(".category").html(b.categoryName),a.$(".date").html(window.formatDate(b.date)),a.$(".card-btn").html("Read More")}))})},()=>{a.append(APP.newComponent(APP.TEMPLATE.error.html,APP.TEMPLATE.error.css,"dynamic",a=>{a.$("app-error-message").text(`There seems to be an error while trying to connect to the api server.`)}))})}).render(),window.ripple()}),ROUTER.on("/projects",()=>{new IpTrack,APP.clearScreen(),APP.title("Projects"),APP.newComponent(APP.TEMPLATE.blog.html,APP.TEMPLATE.blog.css,"dynamic",a=>{fillCardPlaceHolders(a.$('app-blog'));window.API.static("project",b=>{a.$("app-blog").html(''),b.forEach(b=>{a.$("app-blog").append(APP.newComponent(APP.TEMPLATE.card.html,APP.TEMPLATE.card.css,"dynamic",a=>{a.$(".card-title").html(b.title),a.$("app-card-img").css({"background-image":"url("+b.image+")"}),a.$(".card-content").html(b.excerpt),a.$(".card-btn").href=b.url,a.$(".category").html(b.categoryName),a.$(".date").html(window.formatDate(b.date)),a.$(".card-btn").html("Read More")}))})},()=>{a.append(APP.newComponent(APP.TEMPLATE.error.html,APP.TEMPLATE.error.css,"dynamic",a=>{a.$("app-error-message").text(`There seems to be an error while trying to connect to the api server.`)}))})}).render(),window.ripple()}),ROUTER.on("/post/:id",a=>{new IpTrack,APP.clearScreen(),fillPostPlaceHolder(APP.screen),window.API.dynamic("post",a[0].id,a=>{window.APP.clearScreen(),window.APP.title(`${a.title} - Blog`),window.APP.meta("og:title",document.title),window.APP.meta("og:url",window.location.href),window.APP.meta("og:image",a.image),window.APP.meta("og:description",a.excerpt),window.APP.newComponent(APP.TEMPLATE.post.html,APP.TEMPLATE.post.css,"dynamic",b=>{var c=document.createElement("div"),d=document.createElement("div");c.html(a.categoryName),d.html(window.formatDate(a.date)),b.$("app-post-pills").append(d),b.$("app-post-pills").append(c),a.tag?(tag=document.createElement("div"),tag.html(a.tag),b.$("app-post-pills").append(c),b.$("app-post-pills").css({"grid-template-columns":"repeat(3, auto)"})):b.$("app-post-pills").css({"grid-template-columns":"repeat(2, auto)"}),b.$("app-post-img").css({"background-image":"url("+a.image+")"}),b.$("app-post-title").html(a.title),b.$("app-post-content").html(a.content);var e=window.Constants.share(window.location.href,a.title,a.excerpt);Object.keys(e).forEach(a=>{var c=document.createElement("a");c.href=e[a].uri,c.target="_blank",c.html(a),c.css({"background-color":e[a].color}),b.$("app-post-share").append(c)});var f=100*(a.likes/(a.likes+a.dislikes)),g=100*(a.dislikes/(a.likes+a.dislikes));b.$("app-feedback-like").css({width:f+"%"}),b.$("app-feedback-dislike").css({width:g+"%"}),b.$("#like").setAttribute("onclick",`window.saveFeedback('likes', 'blog', '${a._id}')`),b.$("#dislike").setAttribute("onclick",`window.saveFeedback('dislikes', 'blog', '${a._id}')`),window.API.getOffline("post",a._id)?(b.$("#offline").html("Remove from offline"),b.$("#offline").removeAttribute("onclick"),b.$("#offline").setAttribute("onclick",`window.API.removeOffline('post', '${a._id}')`)):(b.$("#offline").html("Save for offline"),b.$("#offline").setAttribute("onclick",`window.API.saveOffline('post', '${JSON.stringify(a).toString()}')`))}).render(),window.ripple()},()=>{post.append(APP.newComponent(APP.TEMPLATE.error.html,APP.TEMPLATE.error.css,"dynamic",a=>{a.$("app-error-message").text(`There seems to be an error while trying to connect to the api server.`)}))})}),ROUTER.on("/project/:id",a=>{new IpTrack,APP.clearScreen(),fillPostPlaceHolder(APP.screen),window.API.dynamic("project",a[0].id,a=>{window.APP.clearScreen(),window.APP.title(`${a.title} - Project`),window.APP.meta("og:title",document.title),window.APP.meta("og:url",window.location.href),window.APP.meta("og:image",a.image),window.APP.meta("og:description",a.excerpt),window.APP.newComponent(APP.TEMPLATE.post.html,APP.TEMPLATE.post.css,"dynamic",b=>{var c=document.createElement("div"),d=document.createElement("div");c.html(a.categoryName),d.html(window.formatDate(a.date)),b.$("app-post-img").css({"background-image":"url("+a.image+")"}),b.$("app-post-title").html(a.title),b.$("app-post-content").html(a.content),b.$("app-post-pills").append(d),b.$("app-post-pills").append(c),a.tag?(tag=document.createElement("div"),tag.html(a.tag),b.$("app-post-pills").append(c),b.$("app-post-pills").css({"grid-template-columns":"repeat(3, auto)"})):b.$("app-post-pills").css({"grid-template-columns":"repeat(2, auto)"});var e=window.Constants.share(window.location.href,a.title,a.excerpt);Object.keys(e).forEach(a=>{var c=document.createElement("a");c.href=e[a].uri,c.target="_blank",c.html(a),c.css({"background-color":e[a].color}),b.$("app-post-share").append(c)});var f=100*(a.likes/(a.likes+a.dislikes)),g=100*(a.dislikes/(a.likes+a.dislikes));b.$("app-feedback-like").css({width:f+"%"}),b.$("app-feedback-dislike").css({width:g+"%"}),b.$("#like").setAttribute("onclick",`window.saveFeedback('likes', 'project', '${a._id}')`),b.$("#dislike").setAttribute("onclick",`window.saveFeedback('dislikes', 'project', '${a._id}')`),window.API.getOffline("project",a._id)?(b.$("#offline").html("Remove from offline"),b.$("#offline").removeAttribute("onclick"),b.$("#offline").setAttribute("onclick",`window.API.removeOffline('post', '${a._id}')`)):(b.$("#offline").html("Save for offline"),b.$("#offline").setAttribute("onclick",`window.API.saveOffline('project', '${JSON.stringify(a).toString()}')`))}).render(),window.ripple()},()=>{post.append(APP.newComponent(APP.TEMPLATE.error.html,APP.TEMPLATE.error.css,"dynamic",a=>{a.$("app-error-message").text(`There seems to be an error while trying to connect to the api server.`)}))})}),ROUTER.on("/contact",()=>{new IpTrack,APP.clearScreen(),APP.title("Contact Me"),APP.newComponent(APP.TEMPLATE.contact.html,APP.TEMPLATE.contact.css,"dynamic",a=>{window.API.static("about",b=>{b.connect.forEach(b=>{var c=document.createElement("a");c.classList.add("social-link"),c.target="_blank",c.href=b.url,c.setAttribute("_ripple",""),c.html(b.name),c.css({"background-color":b.color}),a.$(".social").append(c)})},()=>{a.$(".social").append(APP.newComponent(APP.TEMPLATE.error.html,APP.TEMPLATE.error.css,"dynamic",a=>{a.$("app-error-message").text(`There seems to be an error while trying to connect to the api server.`)}))});var b=a.$("#contact-form");b.addEventListener("submit",a=>{if(a.preventDefault(),window.form.validate(b)){for(var c=0;c<b.childElementCount;c++)b.children[c].setAttribute("disabled","");window.post(`${window.base}/post/submit/${new Date().getTime()}/contact`,window.form.getData(b),a=>{if("success"===a.status){for(var c=0;c<b.childElementCount;c++)b.children[c].value="",b.children[c].removeAttribute("disabled","");new AppAlert({message:a.message,type:"success"})}else{for(var c=0;c<b.childElementCount;c++)b.children[c].removeAttribute("disabled","");new AppAlert({message:a.message,type:"error"})}})}},!1)}).render()}),ROUTER.on("/hire-me",()=>{new IpTrack,APP.clearScreen(),APP.title("Hire Me"),APP.newComponent(APP.TEMPLATE.hireMe.html,APP.TEMPLATE.hireMe.css,"dynamic",a=>{var b=a.$("#hire-me");b.addEventListener("submit",a=>{if(a.preventDefault(),window.form.validate(b)){for(var c=0;c<b.childElementCount;c++)b.children[c].setAttribute("disabled","");window.post(`${window.base}/post/submit/${new Date().getTime()}/hire-me`,window.form.getData(b),a=>{if("success"===a.status){for(var c=0;c<b.childElementCount;c++)"country"!==b.children[c].name&&(b.children[c].value="",b.children[c].removeAttribute("disabled",""));new AppAlert({message:a.message,type:"success"})}else{for(var c=0;c<b.childElementCount;c++)b.children[c].removeAttribute("disabled","");new AppAlert({message:a.message,type:"error"})}})}},!1)}).render()}),window.ripple(),navigator.serviceWorker?navigator.serviceWorker.register("/sw.js",{scope:"/"}).then(function(){}).catch(function(a){console.error(a)}):new AppAlert({message:"Service Worker is not supported in this browser. You may not be able to view this website offline",type:"warning"});